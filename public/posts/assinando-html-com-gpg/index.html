<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="Assinando p√°ginas HTML com GPG"><meta property="og:description" content="H√° alguns meses eu reformulei este site, eu estava usando wordpress e n√£o estava
muito feliz com isso, ent√£o decidi usar um gerador de p√°ginas est√°ticas, nesse caso o Hugo.
No passado eu j√° utilizei o Pelican, o Jekyll e o Dangolino,
este √∫ltimo era uma ferramenta criada por mim, mas que descontinuei depois de algum tempo.
Se n√£o me engano, h√° posts aqui falando sobre eles.
Por que assinar as p√°ginas?
Eu vejo a criptografia como um mecanismo de defesa, acredito que as pessoas devem
criptografar tudo, para tentar garantir seguran√ßa, privacidade e autenticidade, entre outras coisas."><meta property="og:url" content="https://adlermedrado.com.br/posts/assinando-html-com-gpg/"><meta property="og:site_name" content="Adler Medrado's corner of the web"><meta property="og:type" content="article"><meta property="og:image" content="https://adlermedrado.com.br/images/fraudtalon-preview.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Assinando p√°ginas HTML com GPG"><meta name=twitter:description content="H√° alguns meses eu reformulei este site, eu estava usando wordpress e n√£o estava
muito feliz com isso, ent√£o decidi usar um gerador de p√°ginas est√°ticas, nesse caso o Hugo.
No passado eu j√° utilizei o Pelican, o Jekyll e o Dangolino,
este √∫ltimo era uma ferramenta criada por mim, mas que descontinuei depois de algum tempo.
Se n√£o me engano, h√° posts aqui falando sobre eles.
Por que assinar as p√°ginas?
Eu vejo a criptografia como um mecanismo de defesa, acredito que as pessoas devem
criptografar tudo, para tentar garantir seguran√ßa, privacidade e autenticidade, entre outras coisas."><meta name=twitter:image content="https://adlermedrado.com.br/images/fraudtalon-preview.png"><title>Assinando p√°ginas HTML com GPG</title><meta name=description content="H√° alguns meses eu reformulei este site, eu estava usando wordpress e n√£o estava
muito feliz com isso, ent√£o decidi usar um gerador de p√°ginas est√°ticas, nesse caso o Hugo.
No passado eu j√° utilizei o Pelican, o Jekyll e o Dangolino,
este √∫ltimo era uma ferramenta criada por mim, mas que descontinuei depois de algum tempo.
Se n√£o me engano, h√° posts aqui falando sobre eles.
Por que assinar as p√°ginas?
Eu vejo a criptografia como um mecanismo de defesa, acredito que as pessoas devem
criptografar tudo, para tentar garantir seguran√ßa, privacidade e autenticidade, entre outras coisas."><meta name=keywords content="AI fraud detection,cybersecurity Brazil,spacexnu,Adler Medrado,FraudTalon,digital sovereignty,threat intelligence,Python,Go,Rust,security engineering"><link rel=author href=/humans.txt><link rel=icon type=image/png href=/images/favicon.png><link rel=canonical href=https://adlermedrado.com.br/posts/assinando-html-com-gpg/><link rel=alternate type=application/rss+xml title="Adler Medrado's corner of the web" href=/index.xml><link href=/css/styles.css rel=stylesheet></head><body><header class=glitch-zone><nav class=navbar role=navigation aria-label="Main Navigation"><div class=navbar_left><a href=/ class=h-card rel=me><strong>Adler Medrado<span class=cursor-blink>|</span></strong></a></div><div class="navbar_right navbar_right_animated"><a href=/about>about</a>
<a href=/projects>projects</a>
<a href=/posts>posts</a>
<a href=/missives>missives</a>
<a href=/now>what am i doing now</a>
<a href=/uses>what am i using</a>
<a href=/contact>contact</a>
<a href=/index.xml aria-label="RSS feed">rss</a></div></nav></header><main><section class=section><article><div><h1>Assinando p√°ginas HTML com GPG</h1><div><div><p><small><time>January 7, 2024</time>
|
6 minutes read</small><div class=post-tags><p><strong>Tags:</strong>
<a href=/tags/site>site</a>,
<a href=/tags/gpg>gpg</a>,
<a href=/tags/seguranca>seguranca</a></p></div></p></div><span class=line_break></span></div><div class=content><p>H√° alguns meses eu reformulei este site, eu estava usando wordpress e n√£o estava
muito feliz com isso, ent√£o decidi usar um gerador de p√°ginas est√°ticas, nesse caso o <a href=https://gohugo.io>Hugo</a>.</p><p>No passado eu j√° utilizei o <a href=https://getpelican.com>Pelican</a>, o <a href=https://jekyllrb.com>Jekyll</a> e o Dangolino,
este √∫ltimo era uma ferramenta criada por mim, mas que descontinuei depois de algum tempo.
Se n√£o me engano, h√° posts aqui falando sobre eles.</p><h2 id=por-que-assinar-as-p√°ginas>Por que assinar as p√°ginas?</h2><p>Eu vejo a criptografia como um mecanismo de defesa, acredito que as pessoas devem
criptografar tudo, para tentar garantir seguran√ßa, privacidade e autenticidade, entre outras coisas.</p><p>Nesse caso espec√≠fico, quando eu resolvi reestruturar esse site pensei em garantir que
o conte√∫do aqui publicado fosse de fato produzido por mim, isso evitaria uma situa√ß√£o
em que uma pessoa com acesso indevido ao meu servidor alterasse conte√∫do postado aqui e
me comprometesse de alguma maneira.</p><p>Esse foi um ponto, mas atualmente com a quantidade de fake news publicadas na internet,
bem como o uso indiscriminado de IA, √© dif√≠cil saber o que √© ou n√£o confi√°vel,
e eu quero que pelo menos o que eu postar, seja facilmente identificado como leg√≠timo.</p><h2 id=fazendo-isso-no-meu-site-vai-mudar-alguma-coisa>Fazendo isso no meu site, vai mudar alguma coisa?</h2><p>Isoladamente n√£o vai mudar nada, mas imagina se todo mundo que publicasse
algo em seus sites fizesse isso? J√° mudaria alguma coisa, certo?</p><p>Usar GPG/PGP n√£o √© trivial, entretanto tamb√©m n√£o um bicho de sete cabe√ßas,
tem posts aqui que eu j√° abordei o assunto, fazem alguns anos e podem estar
desatualizados, mas serve como ponto de partida se voc√™ est√° come√ßando a estudar o assunto agora.</p><h2 id=como-funciona-uma-assinatura-gpg>Como funciona uma assinatura GPG</h2><p><a href=https://www.gnupg.org>GPG</a> ou GNU Privacy Guard √© uma implementa√ß√£o livre do
<a href=https://www.openpgp.org>OpenPGP</a>, que √© um padr√£o para criptografia, descriptografia,
assinatura, etc, baseado no PGP, desenvolvido por Phil Zimmermann.</p><p>Basicamente o GPG √© uma suite de software que te permite gerir chaves criptogr√°ficas e
criptografar e descriptografar usando as chaves geridas por ele.</p><p>Quando uma pessoa cria um par de chaves, ela pode compartilhar a chave p√∫blica com outras pessoas,
que por sua vez tamb√©m compartilham as suas e quando h√° uma rela√ß√£o de confian√ßa entre elas,
as suas chaves podem ser mutuamente assinadas o que demonstra para terceiros que as chaves s√£o leg√≠timas.</p><p>A minha chave p√∫blica est√° dispon√≠vel <a href=/pub-key.asc>aqui</a> bem como no
<a href="https://keys.openpgp.org/search?q=FF676DC52A0191C3">servidor do OpenPGP</a>.</p><p>Voltando&mldr;</p><p>No caso das assinaturas das p√°ginas HTML do meu site, qualquer pessoa pode verificar
se elas est√£o assinadas com a minha chave ou n√£o, nesse segundo caso o conte√∫do n√£o √© leg√≠timo.</p><h2 id=assinar-o-pr√≥prio-arquivo-ou-em-um-arquivo-separado>Assinar o pr√≥prio arquivo ou em um arquivo separado?</h2><p>Os arquivos do meu site est√£o assinados no pr√≥prio html, mas a assinatura poderia
estar em um arquivo separado.</p><p>Em um arquivo separado, seria algo assim: O endere√ßo <a href=https://site.com/index.html>https://site.com/index.html</a>
teria um endere√ßo com um arquivo correspondente chamado <a href=https://site.com/index.asc>https://site.com/index.asc</a>,
cujo conte√∫do √© a assinatura criptogr√°fica do arquivo index.html.</p><p>Eu optei por deixar no mesmo arquivo para facilitar
o processo de valida√ß√£o, mas ambas as maneiras s√£o v√°lidas.</p><p>Caso tenha curiosidade para ver como √© o arquivo com a assinatura embutida, utilize
a funcionalidade <em>Mostrar c√≥digo-fonte do seu navegador</em>.</p><h2 id=como-validar-a-integridade-do-arquivo-assinado>Como validar a integridade do arquivo assinado?</h2><p>Primeiro a minha chave p√∫blica deve ser importada para seu gerenciador de chaves (GPG Suite por exemplo),
depois basta fazer o download do arquivo html e usar o comando <em>verify</em> do GPG para checar a integridade.</p><p>Para validar o arquivo HTML da home do meu site, basta executar o seguinte comando no seu terminal:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl https://adlermedrado.com.br/ | gpg --verify
</span></span></code></pre></div><p>Resultado:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl https://adlermedrado.com.br/ | gpg --verify
</span></span><span style=display:flex><span>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span></span><span style=display:flex><span>                                 Dload  Upload   Total   Spent    Left  Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span>  <span style=color:#ae81ff>7413</span>    <span style=color:#ae81ff>0</span>  <span style=color:#ae81ff>7413</span>    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>   <span style=color:#ae81ff>7803</span>      <span style=color:#ae81ff>0</span> --:--:-- --:--:-- --:--:--  <span style=color:#ae81ff>7803</span>
</span></span><span style=display:flex><span>gpg: Signature made Dom <span style=color:#ae81ff>31</span> Dez 13:19:04 <span style=color:#ae81ff>2023</span> -03
</span></span><span style=display:flex><span>gpg:                using RSA key 39A90E7D803B5C02D3EFEBA7FF676DC52A0191C3
</span></span><span style=display:flex><span>gpg: Good signature from <span style=color:#e6db74>&#34;Adler Medrado &lt;adler@adlermedrado.com.br&gt;&#34;</span> <span style=color:#f92672>[</span>ultimate<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>Para mostrar o que aconteceria caso o conte√∫do do arquivo fosse modificado, eu
fiz uma modifica√ß√£o e mandei verificar novamente. O resultado:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl https://adlermedrado.com.br/ | gpg --verify
</span></span><span style=display:flex><span>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span></span><span style=display:flex><span>                                 Dload  Upload   Total   Spent    Left  Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span>  <span style=color:#ae81ff>7423</span>    <span style=color:#ae81ff>0</span>  <span style=color:#ae81ff>7423</span>    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>   <span style=color:#ae81ff>7813</span>      <span style=color:#ae81ff>0</span> --:--:-- --:--:-- --:--:--  <span style=color:#ae81ff>7813</span>
</span></span><span style=display:flex><span>gpg: Signature made Dom <span style=color:#ae81ff>31</span> Dez 13:19:04 <span style=color:#ae81ff>2023</span> -03
</span></span><span style=display:flex><span>gpg:                using RSA key 39A90E7D803B5C02D3EFEBA7FF676DC52A0191C3
</span></span><span style=display:flex><span>gpg: BAD signature from <span style=color:#e6db74>&#34;Adler Medrado &lt;adler@adlermedrado.com.br&gt;&#34;</span> <span style=color:#f92672>[</span>ultimate<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>Esse resultado indica que o arquivo foi modificado, ou seja, n√£o est√° √≠ntegro
de acordo com a assinatua contida nele.</p><h2 id=como-assinar-os-arquivos>Como assinar os arquivos</h2><p>Como mencionei anteriormente, estou usando o Hugo para gerar os arquivos est√°ticos
do site, para isso o Hugo possui um comando espec√≠fico. Como s√£o diversos comandos
usados nesse processo, eu coloquei todos em um arquivo Makefile pois minha mem√≥ria
√© p√©ssima.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Makefile data-lang=Makefile><span style=display:flex><span><span style=color:#a6e22e>help</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;targets:&#34;</span>
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;serve: Run a local hugo development server&#34;</span>
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;build: Build the minified version of the site&#34;</span>
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;clear-sign: PGP Clearsign all HTML pages of the site&#34;</span>
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;deploy: Deploy files to server&#34;</span>
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;help: Show this help&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>serve</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	hugo server -D
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>build</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	hugo --gc --minify
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>clear-sign</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	./clearsign_html.sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>deploy</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	rsync -rvhe ssh --progress --delete ./public/ host:dir
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>.PHONY</span><span style=color:#f92672>:</span> serve build signature
</span></span></code></pre></div><p>Ap√≥s redigir um novo post, eu uso o comando <em>build</em> para converter os arquivos
markdown em html, em seguida eu uso o comando <em>clear-sign</em> para assinar cada
arquivo individualmente e em seguida eu atualizo o servidor com os novos arquivos
usando o comando <em>deploy</em>.</p><p>Para realizar as assinaturas, eu criei um pequeno script bash que √© executado
para cada arquivo:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env bash
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>shopt -s globstar
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> sign_html <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  html<span style=color:#f92672>=</span>$1
</span></span><span style=display:flex><span>  temp<span style=color:#f92672>=</span>/tmp/pgp-html-$$
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;Copying file </span>$1<span style=color:#e6db74> to </span>$temp<span style=color:#e6db74> in order to be signed&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#39;--&gt;&#39;</span>
</span></span><span style=display:flex><span>    cat <span style=color:#e6db74>&#34;</span>$html<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#39;&lt;!--&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>)</span> &gt;$temp
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;Signing </span>$temp<span style=color:#e6db74> and renaming to </span>$html<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#39;&lt;!--&#39;</span>
</span></span><span style=display:flex><span>    gpg --clearsign --default-key YOUR_KEY --output - $temp
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#39;--&gt;&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>)</span> &gt;<span style=color:#e6db74>&#34;</span>$html<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;Cleaning the garbage...&#34;</span>
</span></span><span style=display:flex><span>  rm $temp
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i in public/**/*.html; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>  sign_html <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><h2 id=se-voc√™-n√£o-usa-considere-refletir-sobre-o-assunto>Se voc√™ n√£o usa, considere refletir sobre o assunto</h2><p>Gerenciar chaves n√£o √© trivial, √© necess√°rio estudar e conhecer a ferramenta e os conceitos,
√© por isso que a maioria das pessoas s√≥ usam criptografia em casos que consideram importantes.</p><p>√â por isso que eu acho projetos como o <a href=https://keybase.io>Keybase</a> interessantes,
pois facilitam a gest√£o de chaves e promovem o uso da criptografia.</p><p>Se voc√™ nunca usou GPG, sugiro que comece por l√°.</p><h2 id=e-daqui-pra-frente>E daqui pra frente?</h2><p>Eu abordei apenas um √∫nico ponto relacionado √† criptografia, esse universo √©
vasto e eu aprendo coias novas diariamente e se voc√™ tiver tempo e interesse no assunto,
ir√° se deparar com temas muito interessantes como Bitcoin (criptomoedas em geral)
e o protocolo do <a href=https://nostr.com>Nostr</a>, por exemplo.</p><p>Divirta-se, espero que aos poucos as pessoas passem a compreender mais sobre a
importancia desse tema e cheguem √† mesma conclus√£o que eu:
<strong>Criptografia √© nossa defesa. Criptografe tudo o que puder.</strong></p></div></div></article><div><div><div><a href=https://adlermedrado.com.br/posts/ferramentas-para-uso-diario/>&#8592; Ferramentas para uso di√°rio</a>
|
<a href=https://adlermedrado.com.br/posts/sudo-touch-id/>Sudo with Touch ID on macOS &#8594;</a></div></div></div></section></main><footer class=glitch-zone role=contentinfo><div class=footer-content><div class=copyright><p><small>&copy; 1996-2026 Adler Medrado</small></p></div><div class=gpg_signed_info><div class=gpg-callout><div class=gpg-callout__icon aria-hidden=true>üîè</div><div class=gpg-callout__text><p class=gpg-callout__title>All pages are PGP signed.</p><p class=gpg-callout__subtitle>Learn how to verify my PGP signature <a class=gpg-callout__link href=/posts/verify-signatures>here</a>.</p></div></div><p><em>Privacy policy: this website employs no tracking.</em></p><p><span class=badge-a-plus><a href="https://developer.mozilla.org/en-US/observatory/analyze?host=adlermedrado.com.br" aria-label="Mozilla Observatory Security Rating: A+">A+</a></span>
<span class=badge-description>Mozilla Observatory Security Rating</span></p></div></div></footer></body></html>