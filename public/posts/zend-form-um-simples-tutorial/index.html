<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="Zend_Form: Um simples tutorial"><meta property="og:description" content="Introdu√ß√£o
Depois de algum tempo sem escrever algo sobre o Zend Framework, venho hoje mostrar rapidamente um exemplo de como usar
o Zend_Form e de quebra vou mostrar o Zend_Translator, que pode ser usado em internacionaliza√ß√£o.
O Zend_Form √© um componente que permite que formul√°rios sejam criados e mantido em um objeto, aumentando produtividade
e mantendo um padr√£o de desenvolvimento. √â poss√≠vel tamb√©m com o Zend_Form, a implementa√ß√£o de formul√°rios com
heran√ßa, ou seja, voc√™ tem um formul√°rio gen√©rico (ex: UsuarioForm) que pode ser utilizado para cria√ß√£o de outros (ex:
UsuarioAdminForm) que possuiriam apenas alguns campos adicionais al√©m do form padr√£o."><meta property="og:url" content="http://xlqlev6ixhge3wyoivxhpcvuv2v5it2m2dxjnfng5d66jb7c6kpv6qid.onion/posts/zend-form-um-simples-tutorial/"><meta property="og:site_name" content="Adler Medrado's corner of the web"><meta property="og:type" content="article"><meta property="og:image" content="http://xlqlev6ixhge3wyoivxhpcvuv2v5it2m2dxjnfng5d66jb7c6kpv6qid.onion/images/fraudtalon-preview.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Zend_Form: Um simples tutorial"><meta name=twitter:description content="Introdu√ß√£o
Depois de algum tempo sem escrever algo sobre o Zend Framework, venho hoje mostrar rapidamente um exemplo de como usar
o Zend_Form e de quebra vou mostrar o Zend_Translator, que pode ser usado em internacionaliza√ß√£o.
O Zend_Form √© um componente que permite que formul√°rios sejam criados e mantido em um objeto, aumentando produtividade
e mantendo um padr√£o de desenvolvimento. √â poss√≠vel tamb√©m com o Zend_Form, a implementa√ß√£o de formul√°rios com
heran√ßa, ou seja, voc√™ tem um formul√°rio gen√©rico (ex: UsuarioForm) que pode ser utilizado para cria√ß√£o de outros (ex:
UsuarioAdminForm) que possuiriam apenas alguns campos adicionais al√©m do form padr√£o."><meta name=twitter:image content="http://xlqlev6ixhge3wyoivxhpcvuv2v5it2m2dxjnfng5d66jb7c6kpv6qid.onion/images/fraudtalon-preview.png"><title>Zend_Form: Um simples tutorial</title><meta name=description content="Introdu√ß√£o
Depois de algum tempo sem escrever algo sobre o Zend Framework, venho hoje mostrar rapidamente um exemplo de como usar
o Zend_Form e de quebra vou mostrar o Zend_Translator, que pode ser usado em internacionaliza√ß√£o.
O Zend_Form √© um componente que permite que formul√°rios sejam criados e mantido em um objeto, aumentando produtividade
e mantendo um padr√£o de desenvolvimento. √â poss√≠vel tamb√©m com o Zend_Form, a implementa√ß√£o de formul√°rios com
heran√ßa, ou seja, voc√™ tem um formul√°rio gen√©rico (ex: UsuarioForm) que pode ser utilizado para cria√ß√£o de outros (ex:
UsuarioAdminForm) que possuiriam apenas alguns campos adicionais al√©m do form padr√£o."><meta name=keywords content="AI fraud detection,cybersecurity Brazil,spacexnu,Adler Medrado,FraudTalon,digital sovereignty,threat intelligence,Python,Go,Rust,security engineering"><link rel=author href=../../humans.txt><link rel=icon type=image/png href=../../images/favicon.png><link rel=canonical href=http://xlqlev6ixhge3wyoivxhpcvuv2v5it2m2dxjnfng5d66jb7c6kpv6qid.onion/posts/zend-form-um-simples-tutorial/><link rel=alternate type=application/rss+xml title="Adler Medrado's corner of the web" href=../../index.xml><link href=../../css/styles.css rel=stylesheet></head><body><header class=glitch-zone><nav class=navbar role=navigation aria-label="Main Navigation"><div class=navbar_left><a href=../../ class=h-card rel=me><strong>Adler Medrado<span class=cursor-blink>|</span></strong></a></div><div class="navbar_right navbar_right_animated"><a href=../../about>about</a>
<a href=../../projects>projects</a>
<a href=../../posts>posts</a>
<a href=../../missives>missives</a>
<a href=../../now>what am i doing now</a>
<a href=../../uses>what am i using</a>
<a href=../../contact>contact</a>
<a href=../../index.xml aria-label="RSS feed">rss</a></div></nav></header><main><section class=section><article><div><h1>Zend_Form: Um simples tutorial</h1><div><div><p><small><time>September 14, 2008</time>
|
6 minutes read</small><div class=post-tags><p><strong>Tags:</strong>
<a href=../../tags/zend-framework>zend-framework</a></p></div></p></div><span class=line_break></span></div><div class=content><p>Introdu√ß√£o</p><p>Depois de algum tempo sem escrever algo sobre o Zend Framework, venho hoje mostrar rapidamente um exemplo de como usar
o <code>Zend_Form</code> e de quebra vou mostrar o <code>Zend_Translator</code>, que pode ser usado em internacionaliza√ß√£o.</p><p>O <code>Zend_Form</code> √© um componente que permite que formul√°rios sejam criados e mantido em um objeto, aumentando produtividade
e mantendo um padr√£o de desenvolvimento. √â poss√≠vel tamb√©m com o <code>Zend_Form</code>, a implementa√ß√£o de formul√°rios com
heran√ßa, ou seja, voc√™ tem um formul√°rio gen√©rico (ex: <code>UsuarioForm</code>) que pode ser utilizado para cria√ß√£o de outros (ex:
<code>UsuarioAdminForm</code>) que possuiriam apenas alguns campos adicionais al√©m do form padr√£o.</p><p>Ele tamb√©m possui componentes que permitem a utiliza√ß√£o de todos os Filters e Validators do Zend, bem como a
implementa√ß√£o de Componentes personalizados.</p><p><strong>M√£os √† obra</strong></p><p>Vamos criar um formul√°rio de contato com o Zend_Form para ser o exemplo deste tutorial.
Este formul√°rio ter√° os campos Nome, Email, Assunto e Mensagem.</p><p>Se f√¥ssemos criar um formul√°rio da maneira convencional, serial algo assim:</p><pre><code>&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Exemplo de form&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form&gt;
            Nome: &lt;input type=&quot;text&quot; id=&quot;nome&quot; name=&quot;nome&quot;&gt;
            Email: &lt;input type=&quot;text&quot; id=&quot;email&quot; name=&quot;email&quot;&gt;
            Assunto: &lt;input type=&quot;text&quot; id=&quot;assunto&quot; name=&quot;email&quot;&gt;
            Mensagem: &lt;textarea rows=&quot;5&quot; cols=&quot;5&quot; id=&quot;mensagem&quot; name=&quot;mensagem&quot;&gt;&lt;/textarea&gt;
            &lt;button id=&quot;enviar&quot;&gt;Enviar&lt;/button&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><p>E se f√¥ssemos usar os <code>Zend_View_Helpers</code> para criar os campos, ficaria mais ou menos assim:</p><pre><code>&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Exemplo de form&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form&gt;
            Nome: &lt;?php echo $this-&gt;formText('nome') ?&gt;
            Email: &lt;?php echo $this-&gt;formText('email') ?&gt;
            Assunto: &lt;?php echo $this-&gt;formText('assunto') ?&gt;
            Mensagem: &lt;?php echo $this-&gt;formTextare('nome', null, array('rows' =&gt; 5, 'cols' =&gt; 5)) ?&gt;
            &lt;?php echo $this-&gt;formButton('salvar', 'Salvar') ?&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><p><strong>Agora vem o Zend_Form</strong></p><p>A diferen√ßa principal entre estas duas maneiras e a maneira utilizando Zend_Form √© que n√≥s podemos definir regras de
valida√ß√£o no servidor diretamente no objeto do form.</p><p>Antes de usar o form, n√≥s devemos criar uma classe que deriva da classe Zend_Form.
Antes de criarmos o c√≥digo PHP do formul√°rio, devemos criar um diret√≥rio para guardar estas classes.
Eu normalmente crio um diret√≥rio forms dentro do diret√≥rio da minha aplica√ß√£o e o incluo no meu include_path.
Eu j√° vi algumas pessoas colocando os forms dentro do diret√≥rio de models. Enfim, o Zend Framework te d√° uma
flexibilidade para
definir o que √© melhor para voc√™.</p><p>Vejamos o c√≥digo do formul√°rio, que se chama <code>ContatoForm.php</code> e est√° no meu diret√≥rio forms conforme citado acima:</p><pre><code>&lt;?php
class ContatoForm extends Zend_Form
{

    public function __construct($options = null)
    {
        parent::__construct($options);
        $this-&gt;generate();
    }

    private function generate()
    {
        $this-&gt;setName('contato'); 
        $nome = new Zend_Form_Element_Text('nome');
        $nome-&gt;setLabel('Nome')-&gt;setRequired(true)
        -&gt;addFilter('StripTags')
        -&gt;addValidator('NotEmpty');

        $email = new Zend_Form_Element_Text('email');
        $email-&gt;setLabel('email')-&gt;setRequired(true)
        -&gt;addFilter('StripTags')
        -&gt;addValidator('NotEmpty');

        $assunto = new Zend_Form_Element_Select('assunto');
        $assunto-&gt;setLabel('Etapa')
        -&gt;setRegisterInArrayValidator(false)
        -&gt;setRequired(true)
        -&gt;addFilter('StripTags')
        -&gt;addValidator('NotEmpty');

        $arrOpcoes = array('Selecione',
        'criticas'    =&gt; 'Cr√≠ticas',
        'sugestoes'   =&gt; 'Sugest√µes',
        'informacoes' =&gt; 'Informa√ß√µes' );
        $assunto-&gt;addMultiOptions($arrOpcoes);

        $mensagem = new Zend_Form_Element_Textarea('mensagem');
        $mensagem-&gt;setAttrib('rows', '5');
        $mensagem-&gt;setAttrib('cols', '5');
        $mensagem-&gt;setLabel('mensagem')-&gt;setRequired(true)
        -&gt;addFilter('StripTags')
        -&gt;addValidator('NotEmpty');
        
        $submit = new Zend_Form_Element_Submit('submit');
        $submit-&gt;setAttrib('id', 'salvar');
        $submit-&gt;setAttrib('class', 'verde buttonBar');
        $this-&gt;addElements(array($nome, $email, $assunto, $mensagem,  $submit));
    }
}
</code></pre><p>Analisando o c√≥digo acima, √© poss√≠vel ver que utilizamos os plugins do Zend_Form para criar os campos e bot√£o do nosso
formul√°rio, e em cada elemento do form n√≥s definimos o filtro StripTags e o Validator NotEmpty, que acredito devem ter
ficado claros para que que servem. :D</p><p>No campo assunto, todos os elementos do select s√£o definidos no array $arrOpcoes, sendo o √≠ndice o value e o valor o
texto. Sendo assim, √© muito f√°cil colocar dados que est√£o em banco de dados no select.</p><p>No campo da mensagem, no TextArea, n√≥s definimos os atributos rows e cols utilizando o m√©todo setAttrib. Isso vale para
qualquer componente.</p><p>No final, associamos estes campos no form e o form est√° pronto.</p><p><strong>Cria√ß√£o do Controller</strong></p><p>Agora, vamos fazer um controller para receber estes dados:</p><pre><code>&lt;?php
class ExemploGridController extends Zend_Controller_Action
{
    public function indexAction()
    {
        $this-&gt;view-&gt;titulo = 'Contato!';
        
        $form = new ContatoForm();
        $form-&gt;submit-&gt;setLabel('Enviar');
        $this-&gt;view-&gt;form = $form;
    
        if ($this-&gt;_request-&gt;isPost()) {
            $formData = $this-&gt;_request-&gt;getPost();
        
            if ($form-&gt;isValid($formData)) {
                // Implementa a rotina para envio de email
            } else {
                // Mostra os erros e popula o form com os dados enviados
                $form-&gt;populate($formData);
            }
        }
    }
}
</code></pre><p>No Controller, n√≥s obtemos o objeto do formul√°rio e associamos ao objeto Zend_View, depois verificamos se a requisi√ß√£o √© do tipo POST (se for, o form foi submetido) e ent√£o verificamos se os dados enviados s√£o v√°lidos (os filters e validators que colocamos no form). Se forem v√°lidos, enviaria o email (este exemplo simula um form de contatos, lembra ? :D ) sen√£o, popula o form e mostra as mensagens de erro. Se a requisi√ß√£o n√£o for do tipo POST, o form √© renderizado na tela.</p><p>No arquivo de template (<code>index.phtml</code>) n√≥s apenas damos um echo no form (<code>echo $this->form</code>).</p><p>Abaixo teremos um screenshot do form antes de ser submetido e outra do form ap√≥s ser submetido com dados incorretos para mostrar os erros retornados pelo objeto.</p><p>Se voc√™ viu a segunda screenshot, percebeu que as mensagens de erro est√£o em ingl√™s, certo? Isso ocorre porque o idioma padr√£o para o ZF √© o ingl√™s e √© a√≠ que vai entrar o Zend_Translate, que usaremos para traduzir estas mensagens de erro.</p><p><strong>Traduzindo as mensagens de erro</strong></p><p>Conforme a documenta√ß√£o do Zend Framework, o <code>Zend_Translate</code> √© a solu√ß√£o para aplica√ß√µes multilinguisticas.</p><p>Existem diversas formas de se criar um objeto <code>Zend_Translate</code> e voc√™ pode obter maiores detalhes na documenta√ß√£o. Eu irei usar neste tutorial o meio que julgo ser o mais simples, que √© criando o dicion√°rio em um array e depois associar ele com o objeto <code>Zend_Translate</code>.</p><p><strong>Vejamos:</strong></p><p>Eu criei um diret√≥rio em minha aplica√ß√£o chamado i18n e da mesma maneira coloquei-o no include_path. Dentro dele, o arquivo pt_Br.php foi criado e nele cont√©m o array com as tradu√ß√µes.</p><p>Eu vou colocar o array aqui de maneira reduzida para n√£o ficar muito extenso:</p><pre><code>&lt;?php
// Traducao para o Portugues
$portugues = array();
$portugues['isEmpty']= 'Este campo n√£o pode ser vazio';

// Email
$portugues['emailAddressInvalid'] = 'n√£o √© um email v√°lido no formato nome@servidor';
</code></pre><p>Como podemos ver, <code>isEmpty</code> e <code>emailAddressInvalid</code> s√£o palavras-reservadas dos filtros usados no <code>Zend_Form</code>.
Eu senti uma dificuldade para encontrar estas informa√ß√µes na documenta√ß√£o, at√© onde pesquisei esta parte ainda n√£o havia sido documentada, ent√£o para encontrar as palavras reservadas eu tive que abrir as classes, uma a uma para traduzi-las.</p><p>Agora n√≥s devemos associar este array com o objeto <code>Zend_Translator</code> para ent√£o informar ao Form que ele deve ser traduzido. Vamos l√°:</p><pre><code>// Carregando arquivo de internacionaliza√ß√£o

include_once 'i18n.php';
$translate = new Zend_Translate('array', $portugues, 'pt_BR');
$registry-&gt;set('translate', $translate);
</code></pre><p>Eu crio o objeto <code>Zend_Translate</code>, passando o array <code>$portugues</code> que criei no arquivo <code>i18n.php</code> e guardo este objeto na Registry para poder ser usado posteriormente. Existem outras formas de persistir este objeto, mas eu prefiro desta maneira, ent√£o sinta-se a vontade para mudar se achar uma maneira mais conveniente para voc√™.</p><p>No <code>Zend_Form</code> eu digo para ele usar este arquivo, adicionando o c√≥digo abaixo no metodo <code>init()</code> do <code>ContatoForm</code>:</p><pre><code>$translate = Zend_Registry::get('translate');
$this-&gt;setTranslator($translate);
</code></pre><p>Pronto! Agora seus erros ser√£o traduzidos, conforme screenshot abaixo:</p><p>Simples n√£o? Uma vez criado o objeto <code>Zend_Translate</code>, voc√™ pode tornar esse processo de tradu√ß√£o din√¢mico, da√≠ o trabalho ser√° feito apenas uma √∫nica vez.</p><p><strong>Considera√ß√µes Finais</strong></p><p>Espero que eu tenha conseguido ser claro neste tutorial e que ele seja proveitoso para voc√™. Aproveito para lembrar que este foi um tutorial b√°sico, apenas uma introdu√ß√£o ao Zend_Form, que possui diversos recursos que n√£o abordamos hoje. Espero em breve poder mostr√°-los para voc√™s.</p><p>Eu estou usando o <code>Zend_Form</code> no meu dia-a-dia no trabalho e nossa equipe teve um aumento na produtividade muito grande.</p><p>Bem, tentem implementar um exemplo como esse e qualquer d√∫vida poste aqui no blog que a gente tenta se ajudar. Se tiver alguma dica adicional, deixa-e aqui tamb√©m.</p><p>Vamos l√°, o que est√° esperando para testar? :D</p><p>Abra√ßos.</p></div></div></article><div><div><div><a href=http://xlqlev6ixhge3wyoivxhpcvuv2v5it2m2dxjnfng5d66jb7c6kpv6qid.onion/posts/dia-do-programador/>&#8592; Dia do Programador</a>
|
<a href=http://xlqlev6ixhge3wyoivxhpcvuv2v5it2m2dxjnfng5d66jb7c6kpv6qid.onion/posts/mini-curso-solidario/>Mini-curso Solid√°rio &#8594;</a></div></div></div></section></main><footer class=glitch-zone role=contentinfo><div class=footer-content><div class=copyright><p><small>&copy; 1996-2026 Adler Medrado</small></p></div><div class=gpg_signed_info><div class=gpg-callout><div class=gpg-callout__icon aria-hidden=true>üîè</div><div class=gpg-callout__text><p class=gpg-callout__title>All pages are PGP signed.</p><p class=gpg-callout__subtitle>Learn how to verify my PGP signature <a class=gpg-callout__link href=../../posts/verify-signatures>here</a>.</p></div></div><p><em>Privacy policy: this website employs no tracking.</em></p><p><span class=badge-a-plus><a href="https://developer.mozilla.org/en-US/observatory/analyze?host=adlermedrado.com.br" aria-label="Mozilla Observatory Security Rating: A+">A+</a></span>
<span class=badge-description>Mozilla Observatory Security Rating</span></p></div></div></footer></body></html>