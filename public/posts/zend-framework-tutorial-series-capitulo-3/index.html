<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="Zend Framework tutorial series cap√≠tulo 3"><meta property="og:description" content="Depois de muito tempo eu consegui voltar a este tutorial e a partir deste cap√≠tulo eu vou mudar um pouco a estrat√©gia,
voc√™s ir√£o perceber que este cap√≠tulo ser√° menor do que os anteriores porque eu vou buscar escrever cap√≠tulos menores em
uma frequ√™ncia maior. Espero que d√™ certo.
Introdu√ß√£o
Neste cap√≠tulo eu mostrarei um pouco do Zend_Form e algumas coisas que s√£o poss√≠veis de implementar usando ele.
O Zend_Form √© um componente que nos permite tratar formul√°rios HTML como objetos PHP, simplificando o uso quando
precisamos filtrar e validar dados provenientes de formul√°rios."><meta property="og:url" content="https://adlermedrado.com.br/posts/zend-framework-tutorial-series-capitulo-3/"><meta property="og:site_name" content="Adler Medrado's corner of the web"><meta property="og:type" content="article"><meta property="og:image" content="https://adlermedrado.com.br/images/fraudtalon-preview.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Zend Framework tutorial series cap√≠tulo 3"><meta name=twitter:description content="Depois de muito tempo eu consegui voltar a este tutorial e a partir deste cap√≠tulo eu vou mudar um pouco a estrat√©gia,
voc√™s ir√£o perceber que este cap√≠tulo ser√° menor do que os anteriores porque eu vou buscar escrever cap√≠tulos menores em
uma frequ√™ncia maior. Espero que d√™ certo.
Introdu√ß√£o
Neste cap√≠tulo eu mostrarei um pouco do Zend_Form e algumas coisas que s√£o poss√≠veis de implementar usando ele.
O Zend_Form √© um componente que nos permite tratar formul√°rios HTML como objetos PHP, simplificando o uso quando
precisamos filtrar e validar dados provenientes de formul√°rios."><meta name=twitter:image content="https://adlermedrado.com.br/images/fraudtalon-preview.png"><title>Zend Framework tutorial series cap√≠tulo 3</title><meta name=description content="Depois de muito tempo eu consegui voltar a este tutorial e a partir deste cap√≠tulo eu vou mudar um pouco a estrat√©gia,
voc√™s ir√£o perceber que este cap√≠tulo ser√° menor do que os anteriores porque eu vou buscar escrever cap√≠tulos menores em
uma frequ√™ncia maior. Espero que d√™ certo.
Introdu√ß√£o
Neste cap√≠tulo eu mostrarei um pouco do Zend_Form e algumas coisas que s√£o poss√≠veis de implementar usando ele.
O Zend_Form √© um componente que nos permite tratar formul√°rios HTML como objetos PHP, simplificando o uso quando
precisamos filtrar e validar dados provenientes de formul√°rios."><meta name=keywords content="AI fraud detection,cybersecurity Brazil,spacexnu,Adler Medrado,FraudTalon,digital sovereignty,threat intelligence,Python,Go,Rust,security engineering"><link rel=author href=/humans.txt><link rel=icon type=image/png href=/images/favicon.png><link rel=canonical href=https://adlermedrado.com.br/posts/zend-framework-tutorial-series-capitulo-3/><link rel=alternate type=application/rss+xml title="Adler Medrado's corner of the web" href=/index.xml><link href=/css/styles.css rel=stylesheet></head><body><header class=glitch-zone><nav class=navbar role=navigation aria-label="Main Navigation"><div class=navbar_left><a href=/ class=h-card rel=me><strong>Adler Medrado<span class=cursor-blink>|</span></strong></a></div><div class="navbar_right navbar_right_animated"><a href=/about>about</a>
<a href=/projects>projects</a>
<a href=/posts>posts</a>
<a href=/missives>missives</a>
<a href=/now>what am i doing now</a>
<a href=/uses>what am i using</a>
<a href=/contact>contact</a>
<a href=/index.xml aria-label="RSS feed">rss</a></div></nav></header><main><section class=section><article><div><h1>Zend Framework tutorial series cap√≠tulo 3</h1><div><div><p><small><time>May 22, 2010</time>
|
6 minutes read</small><div class=post-tags><p><strong>Tags:</strong>
<a href=/tags/zend-framework>zend-framework</a></p></div></p></div><span class=line_break></span></div><div class=content><p>Depois de muito tempo eu consegui voltar a este tutorial e a partir deste cap√≠tulo eu vou mudar um pouco a estrat√©gia,
voc√™s ir√£o perceber que este cap√≠tulo ser√° menor do que os anteriores porque eu vou buscar escrever cap√≠tulos menores em
uma frequ√™ncia maior. Espero que d√™ certo.</p><p><strong>Introdu√ß√£o</strong></p><p>Neste cap√≠tulo eu mostrarei um pouco do Zend_Form e algumas coisas que s√£o poss√≠veis de implementar usando ele.</p><p>O <code>Zend_Form</code> √© um componente que nos permite tratar formul√°rios HTML como objetos PHP, simplificando o uso quando
precisamos filtrar e validar dados provenientes de formul√°rios.</p><p>Eu sempre fui contra criar objetos PHP que simplesmente cuspissem c√≥digo HTML sem trazer nenhum benef√≠cio como
filtragem, valida√ß√µes, etc., isso pra mim n√£o fazia nenhum sentido e por isso que eu demorei para me interessar pelo
Zend_Form, at√© que vi que a proposta era diferente, e eles nos traz diversos benef√≠cios como al√©m das j√° mencionadas
funcionalidades de filtro e valida√ß√£o, nos permite trabalhar com Subforms de maneira bem simples, agrupar elementos de
formul√°rios e tamb√©m fazer heran√ßa de formul√°rios, depois de ver isso eu n√£o deixei de usa-lo e sempre incentivo quem
usa Zend Framework a experimenta-lo.</p><p>Uma das premissas de seguran√ßa em desenvolvimento web √©: Filter Input, Escape Output (Filtrar Entradas, Tratar Sa√≠das)
porque n√≥s n√£o devemos confiar nos usu√°rios pois como iremos saber que as informa√ß√µes que est√£o sendo enviadas √†
aplica√ß√£o s√£o corretas ou mal-intencionadas?</p><p>Se voc√™ n√£o ouviu falar sobre SQL Injection, XSS, CSRF, etc., √© bom buscar
maiores informa√ß√µes a respeito e a√≠ voc√™ vai entender o motivo que leva muitos desenvolvedores a serem paran√≥icos. :-)</p><p>Pretendo escrever um cap√≠tulo deste tutorial que aborde apenas aspectos de seguran√ßa com Zend Framework, at√© l√° vou
mostrar apenas como filtrar dados usando <code>Zend_Form</code>.</p><p><strong>Bom, vamos l√°.</strong></p><p>Nosso primeiro form ser√° o de cadastro de usu√°rio e o trabalho sujo quem vai fazer para n√≥s ser√° o <code>Zend_Tool</code> ent√£o, de
dentro do diret√≥rio ra√≠z de sua app, digite o comando:</p><pre><code>zf create form User
</code></pre><p>Este comando criar√° um diret√≥rio chamado forms dentro do diret√≥rio application e se voc√™ analisar o conte√∫do deste
diret√≥rio, ver√° um arquivo chamado User.php com o seguinte conte√∫do:</p><pre><code>&lt;?php
class Application_Form_User extends Zend_Form
{
    public function init()
    {
        /* Form Elements &amp; Other Definitions Here ... */
    }
}
</code></pre><p>Pronto. Agora, dentro do m√©todo <code>init()</code> n√≥s podemos configurar o nosso formul√°rio.</p><p>Este formul√°rio ter√° os seguintes campos:</p><p>username: Nome do usu√°rio do sistema, login de acesso.
fullName: Nome completo do usu√°rio
email: Endere√ßo de e-mail do sujeito
password: Senha de acesso ao sistema
submit: Bot√£o de submit :-)</p><p>Se eu fosse criar esse formul√°rio na m√£o, eu teria de validar no script PHP que recebesse estes dados para garantir
que as informa√ß√µes est√£o de acordo com o que deve ser submetido e esse trabalho se torna chato depois de algum
tempo trabalhando com desenvolvimento e √© a√≠ que o <code>Zend_Form</code> come√ßa a nos dar uma for√ßa.</p><p>Para este formul√°rio eu determinei tais filtros e valida√ß√µes:</p><p>username</p><ul><li>O campo √© obrigat√≥rio</li><li>Qualquer tag dever√° ser removida</li><li>Espa√ßos em branco das extremidades ser√£o removidos</li><li>N√£o pode ser submetido em branco/vazio</li><li>Dever√° cont√©r entre 5 e 30 caracteres.</li><li></li></ul><p>fullName</p><ul><li>O campo √© obrigat√≥rio</li><li>Qualquer tag dever√° ser removida</li><li>Espa√ßos em branco das extremidades ser√£o removidos</li><li>N√£o pode ser submetido em branco/vazio</li><li>Dever√° cont√©r entre 5 e 90 caracteres.</li></ul><p>email</p><ul><li>O campo √© obrigat√≥rio</li><li>Qualquer tag dever√° ser removida</li><li>Espa√ßos em branco das extremidades ser√£o removidos</li><li>Dever√° validar se o valor informado √© compat√≠vel com um endere√ßo de e-mail v√°lido</li></ul><p>password</p><ul><li>O campo √© obrigat√≥rio</li><li>Qualquer tag dever√° ser removida</li><li>Espa√ßos em branco das extremidades ser√£o removidos</li><li>N√£o pode ser submetido em branco/vazio</li><li>Dever√° cont√©r entre 5 e 30 caracteres.</li></ul><p>Vamos configurar nossa classe para atender a estes requisitos:</p><pre><code>class Application_Form_User extends Zend_Form
{
    public function init()
    {
        $username = new Zend_Form_Element_Text('username');
        $username-&gt;setLabel('Usu√°rio')
          -&gt;setRequired(true)
          -&gt;addFilter('StripTags')
          -&gt;addFilter('StringTrim')
          -&gt;addValidator('NotEmpty')
          -&gt;addValidator('StringLength', false, array(5,30));
        $fullName = new Zend_Form_Element_Text('fullName');
        $fullName-&gt;setLabel('Nome Completo')
          -&gt;setRequired(true)
          -&gt;addFilter('StripTags')
          -&gt;addFilter('StringTrim')
          -&gt;addValidator('NotEmpty')
          -&gt;addValidator('StringLength', false, array(5,90));
        $email = new Zend_Form_Element_Text('email');
        $email-&gt;setLabel('E-mail')
          -&gt;setRequired(true)
          -&gt;addFilter('StripTags')
          -&gt;addFilter('StringTrim')
          -&gt;addValidator('EmailAddress');
        $password = new Zend_Form_Element_Password('password');
        $password-&gt;setLabel('Senha')
          -&gt;setRequired(true)
          -&gt;addFilter('StripTags')
          -&gt;addFilter('StringTrim')
          -&gt;addValidator('NotEmpty')
          -&gt;addValidator('StringLength', false, array(5,30));
        $submit = new Zend_Form_Element_Submit('Salvar');
        $this-&gt;addElements( array($username, $fullName, $email, $password, $submit) );
    }
}
</code></pre><p>Depois de ler os requisitos para nosso formul√°rio fica f√°cil entender o c√≥digo acima faz,
mas vamos dar uma analisada r√°pida:
Para cada elemento do formul√°rio n√≥s criamos um objeto respectivo, por exemplo, para campos de texto n√≥s usamos
<code>Zend_Form_Element_Text</code>, para campo de senha n√≥s usamos <code>Zend_Form_Element_Password</code> e individualmente em cada
elemento n√≥s determinamos quais filtros n√≥s usar√≠amos por meio do m√©todo <code>addFilter()</code> e quais valida√ß√µes seriam
feitas usando o m√©todo <code>addValidator()</code>.</p><p>A diferen√ßa entre filters e validators √© bem simples: Filtros alteram o valor do elemento e validadores checam se o
valor do elemento possi certas caracter√≠sticas de acordo com o validador e retornam se o valor √© v√°lido ou n√£o sem
alterar seu valor.</p><p><strong>Elementos</strong></p><p>Obviamente os elementos de formul√°rio mais comuns j√° existem no framework, qualquer elemento mais espec√≠fico pode ser desenvolvimento sem muitas dificuldades.</p><ul><li>button</li><li>checkbox / multicheckboxes</li><li>hidden</li><li>image</li><li>password</li><li>radio</li><li>reset</li><li>select / multiselect</li><li>submit</li><li>text</li><li>textarea</li></ul><p><strong>Filtros e Validadores</strong></p><p>Os filtros e validadores considerados mais comuns tamb√©m j√° fazem parte do pacote do Zend Framework,
al√©m daqueles que n√≥s usamos no nosso formul√°rio Users, n√≥s temos os seguintes Validadores e Filtros √† disposi√ß√£o.</p><p>Veja direto na fonte:</p><p><a href=http://framework.zend.com/manual/1.10/en/zend.validate.set.html>http://framework.zend.com/manual/1.10/en/zend.validate.set.html</a>
<a href=http://framework.zend.com/manual/1.10/en/zend.filter.set.html>http://framework.zend.com/manual/1.10/en/zend.filter.set.html</a></p><p><strong>Vamos colocar pra funcionar agora</strong></p><p>Agora vamis pra parte mais legal que √© ver o nosso formul√°rio funcionando,
para isso temos que instancia-lo no controller e adiciona-lo √† nossa view.</p><p>Controller:
$this->view->form = new Application_Form_User();
if ($this->getRequest()->isPost()) {
if ($this->view->form->isValid($this->_request->getPost())) {
// Salva no banco de dados ou seja l√° o que for fazer com os dados provenientes do form
var_dump($this->_request->getPost());
} else {
$this->view->form->populate($this->_request->getPost());
}
}</p><p>Primeiramente n√≥s criamos uma inst√¢ncia da nossa classe Application_Form_User
(sim, este √© o nome gerado automaticamente e √© um padr√£o, portanto, n√£o mude) e associamos ao nosso objeto <code>Zend_View</code>.</p><p>Em seguida obtemos o objeto que mant√©m as informa√ß√µes do request e verificamos se o request foi do m√©todo POST,
se for post, verificamos se os dados do formul√°rio s√£o v√°lidos e se o resultado for positivo, n√≥s mostramos estes dados
na tela (no pr√≥ximo cap√≠tulo gravaremos no banco de dados), sen√£o, n√≥s renderizamos a tela novamente com os dados
preenchidos no form e suas devidas mensagens de erro.</p><p>Em princ√≠pio as mensagens de erro est√£o em ingl√™s e n√≥s as alteraremos posteriormente quando trabalharmos com I18N e L10N.</p><p>Na camada de vis√£o, basta fazer:</p><pre><code>echo $this-&gt;form;
</code></pre><p>Pronto. Seu form j√° pode ser usado.</p><p>O c√≥digo-fonte que √© gerado n√£o agrada a todos, mas para mudar isso n√≥s podemos usar os Decorators e deixar
o c√≥digo gerado da maneira que preferirmos, por√©m os decorators n√£o s√£o um assunto t√£o trivial e por isso eu n√£o
vou aborda-los neste cap√≠tulo.
Se desejar conhecer mais: <a href=http://framework.zend.com/manual/1.10/en/zend.form.decorators.html>http://framework.zend.com/manual/1.10/en/zend.form.decorators.html</a></p><p>O c√≥digo gerado foi esse:</p><pre><code>&lt;form enctype=&quot;application/x-www-form-urlencoded&quot; action=&quot;&quot; method=&quot;post&quot;&gt;&lt;dl class=&quot;zend_form&quot;&gt;
&lt;dt id=&quot;username-label&quot;&gt;&lt;label for=&quot;username&quot; class=&quot;required&quot;&gt;Usu√°rio&lt;/label&gt;&lt;/dt&gt;
&lt;dd id=&quot;username-element&quot;&gt;
&lt;input type=&quot;text&quot; name=&quot;username&quot; id=&quot;username&quot; value=&quot;&quot;&gt;&lt;/dd&gt;
&lt;dt id=&quot;fullName-label&quot;&gt;&lt;label for=&quot;fullName&quot; class=&quot;required&quot;&gt;Nome Completo&lt;/label&gt;&lt;/dt&gt;
&lt;dd id=&quot;fullName-element&quot;&gt;
&lt;input type=&quot;text&quot; name=&quot;fullName&quot; id=&quot;fullName&quot; value=&quot;&quot;&gt;&lt;/dd&gt;
&lt;dt id=&quot;email-label&quot;&gt;&lt;label for=&quot;email&quot; class=&quot;required&quot;&gt;E-mail&lt;/label&gt;&lt;/dt&gt;
&lt;dd id=&quot;email-element&quot;&gt;
&lt;input type=&quot;text&quot; name=&quot;email&quot; id=&quot;email&quot; value=&quot;&quot;&gt;&lt;/dd&gt;
&lt;dt id=&quot;password-label&quot;&gt;&lt;label for=&quot;password&quot; class=&quot;required&quot;&gt;Senha&lt;/label&gt;&lt;/dt&gt;
&lt;dd id=&quot;password-element&quot;&gt;
&lt;input type=&quot;password&quot; name=&quot;password&quot; id=&quot;password&quot; value=&quot;&quot;&gt;&lt;/dd&gt;
&lt;dt id=&quot;Salvar-label&quot;&gt;&amp;nbsp;&lt;/dt&gt;&lt;dd id=&quot;Salvar-element&quot;&gt;
&lt;input type=&quot;submit&quot; name=&quot;Salvar&quot; id=&quot;Salvar&quot; value=&quot;Salvar&quot;&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/form&gt;
</code></pre><p><strong>Considera√ß√µes Finais</strong></p><p>Trabalhar com <code>Zend_Form</code> √© muito simples e nos proporciona uma produtividade
maior em nosso dia-a-dia, tenho trabalhado com ele diariamente e posso dizer que tem sido com muito sucesso.</p><p>Obviamente, h√° muito mais coisas para ver e este tutorial √© apenas introdut√≥rio, durante nosso tutorial espero
poder encaixar outras funcionalidades como Subform.</p><p>Espero que voc√™ tenha gostado de mais esse cap√≠tulo.
Ah, os fontes encontram-se no github.</p><p>Abra√ßo.</p></div></div></article><div><div><div><a href=https://adlermedrado.com.br/posts/atualizem-suas-agendas/>&#8592; Atualizem suas agendas</a>
|
<a href=https://adlermedrado.com.br/posts/screencast-zend-framework-e-netbeans/>Screencast Zend Framework e Netbeans &#8594;</a></div></div></div></section></main><footer class=glitch-zone role=contentinfo><div class=footer-content><div class=copyright><p><small>&copy; 1996-2025 Adler Medrado</small></p></div><div class=gpg_signed_info><div class=gpg-callout><div class=gpg-callout__icon aria-hidden=true>üîè</div><div class=gpg-callout__text><p class=gpg-callout__title>All pages are PGP signed.</p><p class=gpg-callout__subtitle>Learn how to verify my PGP signature <a class=gpg-callout__link href=/posts/verify-signatures>here</a>.</p></div></div><p><em>Privacy policy: this website employs no tracking.</em></p><p><span class=badge-a-plus><a href="https://developer.mozilla.org/en-US/observatory/analyze?host=adlermedrado.com.br" aria-label="Mozilla Observatory Security Rating: A+">A+</a></span>
<span class=badge-description>Mozilla Observatory Security Rating</span></p></div></div></footer></body></html>